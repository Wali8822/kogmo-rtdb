<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>KogMo-RTDB: C-Functions for Object Data Handling with directs Database Pointers: Do not use unless you need to.</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<h1>C-Functions for Object Data Handling with directs Database Pointers: Do not use unless you need to.</h1>  </div>
</div>
<div class="contents">

<p>These functions access the actual contents of the data-block of a certain object.  
<a href="#_details">More...</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__kogmo__rtdb__types.html#ga9abedc7430c5b4add02b6c6007e94b22">kogmo_rtdb_objsize_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__kogmo__rtdb__dataptr.html#ga97df2c2fe209f3df49d6712fbab02c63">kogmo_rtdb_obj_readdata_ptr</a> (<a class="el" href="structkogmo__rtdb__handle__t.html">kogmo_rtdb_handle_t</a> *db_h, <a class="el" href="group__kogmo__rtdb__types.html#ga4a3b9bf9e624b075a40435f087c538a6">kogmo_rtdb_objid_t</a> oid, <a class="el" href="group__kogmo__time.html#gab17bc1ed725b2bc06a376917c6ca8bca">kogmo_timestamp_t</a> ts, void *data_pp)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get a Pointer to the latest Data of an Object within the Database.  <a href="#ga97df2c2fe209f3df49d6712fbab02c63"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__kogmo__rtdb__types.html#ga9abedc7430c5b4add02b6c6007e94b22">kogmo_rtdb_objsize_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__kogmo__rtdb__dataptr.html#gad4875f45c7edd13fd96ee0b26e4cc401">kogmo_rtdb_obj_writedata_ptr_begin</a> (<a class="el" href="structkogmo__rtdb__handle__t.html">kogmo_rtdb_handle_t</a> *db_h, <a class="el" href="group__kogmo__rtdb__types.html#ga4a3b9bf9e624b075a40435f087c538a6">kogmo_rtdb_objid_t</a> oid, void *data_pp)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Start pointer-based write (fast but dangerous).  <a href="#gad4875f45c7edd13fd96ee0b26e4cc401"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__kogmo__rtdb__types.html#ga9abedc7430c5b4add02b6c6007e94b22">kogmo_rtdb_objsize_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__kogmo__rtdb__dataptr.html#gaf58aaa627ea7f68ee591f03a38bce813">kogmo_rtdb_obj_writedata_ptr_commit</a> (<a class="el" href="structkogmo__rtdb__handle__t.html">kogmo_rtdb_handle_t</a> *db_h, <a class="el" href="group__kogmo__rtdb__types.html#ga4a3b9bf9e624b075a40435f087c538a6">kogmo_rtdb_objid_t</a> oid, void *data_pp)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Finish pointer-based write and publish data.  <a href="#gaf58aaa627ea7f68ee591f03a38bce813"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>These functions access the actual contents of the data-block of a certain object. </p>
<p>The difference to kogmo_rtdb_data is, that they work with pointers, that point directly into the internal structures of the RTDB. By misusing the pointer you get, you can severely damage the internals of the RTDB.</p>
<p>So please do not use those functions, unless you really need to. With direct pointer operations you can save some time for objects significantly larger than 10000 bytes. </p>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ga97df2c2fe209f3df49d6712fbab02c63"></a><!-- doxytag: member="kogmo_rtdb_funcs.h::kogmo_rtdb_obj_readdata_ptr" ref="ga97df2c2fe209f3df49d6712fbab02c63" args="(kogmo_rtdb_handle_t *db_h, kogmo_rtdb_objid_t oid, kogmo_timestamp_t ts, void *data_pp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__kogmo__rtdb__types.html#ga9abedc7430c5b4add02b6c6007e94b22">kogmo_rtdb_objsize_t</a> kogmo_rtdb_obj_readdata_ptr </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structkogmo__rtdb__handle__t.html">kogmo_rtdb_handle_t</a> *&nbsp;</td>
          <td class="paramname"> <em>db_h</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__kogmo__rtdb__types.html#ga4a3b9bf9e624b075a40435f087c538a6">kogmo_rtdb_objid_t</a>&nbsp;</td>
          <td class="paramname"> <em>oid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__kogmo__time.html#gab17bc1ed725b2bc06a376917c6ca8bca">kogmo_timestamp_t</a>&nbsp;</td>
          <td class="paramname"> <em>ts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>data_pp</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get a Pointer to the latest Data of an Object within the Database. </p>
<p>This function returns a pointer, that points to the last object data within the RTDB internals.<br/>
 It finds the block with a committed_ts &lt;= ts.</p>
<p>At the end of your calculations you SHOULD call this function again and check that your pointer is still the same and therefore valid! If you get another pointer or an error, the data changed while you were using it and your results are from corrupted data. Try it again or do an appropriate error handling.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>db_h</em>&nbsp;</td><td>Database handle </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>oid</em>&nbsp;</td><td>Object-ID of the desired object </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>ts</em>&nbsp;</td><td>Timestamp at which the Object must be "the last committed"; 0 for "now" </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>data_pp</em>&nbsp;</td><td>Pointer to a pointer, that will point to the object data structure for reading afterwards </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>&lt;0 on errors, the real size of the object data found in the rtdb on success</dd></dl>
<p>Example: </p>
<div class="fragment"><pre class="fragment">                kogmo_rtdb_obj_c3_blaobj_t *myobj_p;
                <a class="code" href="group__kogmo__rtdb__dataptr.html#ga97df2c2fe209f3df49d6712fbab02c63" title="Get a Pointer to the latest Data of an Object within the Database.">kogmo_rtdb_obj_readdata_ptr</a>(..,&amp;myobj_p); 
                access data with e.g. myobj_p-&gt;base.data_ts
</pre></div> 
</div>
</div>
<a class="anchor" id="gad4875f45c7edd13fd96ee0b26e4cc401"></a><!-- doxytag: member="kogmo_rtdb_funcs.h::kogmo_rtdb_obj_writedata_ptr_begin" ref="gad4875f45c7edd13fd96ee0b26e4cc401" args="(kogmo_rtdb_handle_t *db_h, kogmo_rtdb_objid_t oid, void *data_pp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__kogmo__rtdb__types.html#ga9abedc7430c5b4add02b6c6007e94b22">kogmo_rtdb_objsize_t</a> kogmo_rtdb_obj_writedata_ptr_begin </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structkogmo__rtdb__handle__t.html">kogmo_rtdb_handle_t</a> *&nbsp;</td>
          <td class="paramname"> <em>db_h</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__kogmo__rtdb__types.html#ga4a3b9bf9e624b075a40435f087c538a6">kogmo_rtdb_objid_t</a>&nbsp;</td>
          <td class="paramname"> <em>oid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>data_pp</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Start pointer-based write (fast but dangerous). </p>
<p>Call this function to receive a pointer where you can write your data. If you are done, call <a class="el" href="group__kogmo__rtdb__dataptr.html#gaf58aaa627ea7f68ee591f03a38bce813" title="Finish pointer-based write and publish data.">kogmo_rtdb_obj_writedata_ptr_commit()</a>.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>db_h</em>&nbsp;</td><td>Database handle </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>oid</em>&nbsp;</td><td>Object-ID of the object to write </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>data_pp</em>&nbsp;</td><td>Pointer to a pointer, that will point to the object data structure for writing afterwards </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>&lt;0 on errors</dd></dl>
<dl class="note"><dt><b>Note:</b></dt><dd><ul>
<li>The object must be created and owned by the calling process.</li>
<li>The object must not be public writable.</li>
<li>The maximum length is objmeta.size_max.</li>
<li>You must manually set base.size before each write.</li>
<li>Be cautious! You can damage the whole database.</li>
<li>DO NOT TOUCH base.committed_ts !!!</li>
<li>Pointer operations are only useful for objects with sizes &gt;= 10KB size. </li>
</ul>
</dd></dl>

</div>
</div>
<a class="anchor" id="gaf58aaa627ea7f68ee591f03a38bce813"></a><!-- doxytag: member="kogmo_rtdb_funcs.h::kogmo_rtdb_obj_writedata_ptr_commit" ref="gaf58aaa627ea7f68ee591f03a38bce813" args="(kogmo_rtdb_handle_t *db_h, kogmo_rtdb_objid_t oid, void *data_pp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__kogmo__rtdb__types.html#ga9abedc7430c5b4add02b6c6007e94b22">kogmo_rtdb_objsize_t</a> kogmo_rtdb_obj_writedata_ptr_commit </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structkogmo__rtdb__handle__t.html">kogmo_rtdb_handle_t</a> *&nbsp;</td>
          <td class="paramname"> <em>db_h</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__kogmo__rtdb__types.html#ga4a3b9bf9e624b075a40435f087c538a6">kogmo_rtdb_objid_t</a>&nbsp;</td>
          <td class="paramname"> <em>oid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>data_pp</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Finish pointer-based write and publish data. </p>
<p>Call this function when you are done writing your data to the area, where you received a pointer from <a class="el" href="group__kogmo__rtdb__dataptr.html#gad4875f45c7edd13fd96ee0b26e4cc401" title="Start pointer-based write (fast but dangerous).">kogmo_rtdb_obj_writedata_ptr_begin()</a>. DO NOT MODIFY THE DATA AFTERWARDS !!!</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>db_h</em>&nbsp;</td><td>Database handle </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>oid</em>&nbsp;</td><td>Object-ID of the object to write </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>data_pp</em>&nbsp;</td><td>Pointer to a pointer the object data structure, that you got from <a class="el" href="group__kogmo__rtdb__dataptr.html#gad4875f45c7edd13fd96ee0b26e4cc401" title="Start pointer-based write (fast but dangerous).">kogmo_rtdb_obj_writedata_ptr_begin()</a> </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>&lt;0 on errors </dd></dl>

</div>
</div>
</div>
<hr size="1"><address style="align: right;"><small>
Generated for KogMo-RTDB by Matthias.Goebl (mattias.goebl*kogmo-rtdb.de) - all rights reserved.</small></address>
</body>
</html>
